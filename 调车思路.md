# 记录调车的信息和思路

- 程序可以成功烧到小车里
- 调试舵机程序


- 增加一对c和h文件时应注意
    - h文件的ifdef要更改
    - include文件要更新
    - .c文件要加入工程
    - .c的函数要在.h中声明
    - 在主函数中加入代码块的初始化


## 需求分析及代码实现

- 通过串口实现命令行控制
    - 命令行在代码中的实现
        - uart串口部分负责识别是否有命令输入，有就将uart4_to_do_flag置1
        - waitToDo部分判断uart4_to_do_flag是否置1而确定是否开始解析命令
        - command文件负责解析并执行命令
    - 命令的首位是否需要特殊字符 不需要，只要每个命令都用回车结尾就行了
    - 怎样实现命令行参数个数的识别
        - strtok分割函数
            - [strtok函数的使用](https://blog.csdn.net/buaa_shang/article/details/8189984)
            - [strtok函数的讲解](https://blog.csdn.net/weibo1230123/article/details/80177898)
            >对于strtok_r函数，如果第1个参数为NULL，就会从第3个参数开始（相当于第1个参数位置填入第3个参数）
        - sprintf
        - 将所有的命令简写为两个字符
    - 怎样解析并执行命令
        -直接用switch语句
    

- 按键消抖
    - 只要能识别按下和放开时的抖动就行了(就是碰到这段时间不触发执行)


## 碰到的问题

- 函数找不到定义或声明
    - go to definition 看看头文件里有没有全局的定义
    - 看一下对应的c文件有没有这个函数
    - 看一下对应的c文件有没有加入到工程

- [unreachable code 错误解决办法](https://blog.csdn.net/majishushu/article/details/53262727)

- 函数指针和指针函数
注意指针函数与函数指针表示方法不同，千万不要混淆。最简单的辨别方式就是看函数名前面的指针*号有没有被括号（）包含，如果被包含就是函数指针，反之则是指针函数。
> 一个指针函数的例子，函数的返回值是指针
float *match();
float *p;
p = match(a);

函数指针图解
@import "./source/pic/函数指针.jpg

- 按键的中断设置函数在哪里

## 待完善

- 能否改善摄像头的性能
    - 查看手册
    - 直接参考别人代码提升性能
    - 看山外的论坛
        - [山外论坛](http://www.vcan123.com/forum.php)
        - [山外鹰眼解压时间](http://www.vcan123.com/forum.php?mod=viewthread&tid=13652&ctid=6)
        - [山外整合资料](./source/K60中文资料整合版.pdf)
    - 为什么PORTA_ISFR是写1来清标志位 因为这个寄存器是写1清0的，往里面写1赋值0
    - 摄像头的代码
        - 图像的获取和处理都应该放在中断里
        - LCD的显示可以用预编译的手段放在摄像头的中断函数里面
        - 通过while来测试处理一张图片和处理一张图片并显示用的时间，再加一点时间作为中断的时间
        - 中断怎么用
            - 查看中断的例程
        - 采集一幅图像的时间长不长
            - 是采集的速度快还是将采集好的数组备份一份速度快


- 怎么设置中断的优先级







